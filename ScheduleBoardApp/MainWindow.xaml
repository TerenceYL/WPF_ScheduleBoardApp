<Window x:Class="ScheduleBoardApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:ScheduleBoardApp.ViewModels"
        xmlns:models="clr-namespace:ScheduleBoardApp.Models"
        Title="排程看板 (Swimlane Board)" Height="600" Width="900"
        Background="#F0F0F0">

    <!-- 設定 DataContext 為 MainViewModel -->
    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>

    <!-- 捲動容器，讓欄位超過寬度時可水平捲動 -->
    <ScrollViewer HorizontalScrollBarVisibility="Auto"
                  VerticalScrollBarVisibility="Auto"
                  Padding="10">
        <!-- 依據 Lanes 建立水平堆疊，每個 Lane 為一個欄位 -->
        <ItemsControl ItemsSource="{Binding Lanes}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <!-- 水平 StackPanel = 泳道排列 -->
                    <StackPanel Orientation="Horizontal" IsItemsHost="True"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>

            <!-- 每個泳道的外觀 -->
            <ItemsControl.ItemTemplate>
                <DataTemplate DataType="{x:Type vm:LaneViewModel}">
                    <Border BorderBrush="DarkGray"
                            BorderThickness="1"
                            CornerRadius="4"
                            Margin="5"
                            Background="White"
                            Width="260"
                            Padding="5">
                        <StackPanel>
                            <!-- 泳道標題 -->
                            <TextBlock Text="{Binding Name}"
                                       FontSize="16"
                                       FontWeight="Bold"
                                       HorizontalAlignment="Center"
                                       Background="#E0E0E0"
                                       Padding="4"
                                       Margin="0,0,0,5"/>

                            <!-- 泳道內卡片列舉 -->
                            <ItemsControl ItemsSource="{Binding Tasks}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate DataType="{x:Type models:TaskItem}">
                                        <Border BorderBrush="#B0B0B0"
                                                BorderThickness="1"
                                                CornerRadius="3"
                                                Margin="3"
                                                Padding="5"
                                                Background="#FFF8E1">
                                            <StackPanel>
                                                <TextBlock Text="{Binding Title}"
                                                           FontWeight="SemiBold"
                                                           Foreground="#212121"/>
                                                <TextBlock Text="{Binding Owner}"
                                                           FontStyle="Italic"
                                                           FontSize="11"
                                                           Foreground="#555555"/>
                                                <TextBlock Text="{Binding StartDate, StringFormat='開始: {0:MM/dd}'}"
                                                           FontSize="11"
                                                           Foreground="#777777"/>
                                                <TextBlock Text="{Binding EndDate, StringFormat='結束: {0:MM/dd}'}"
                                                           FontSize="11"
                                                           Foreground="#777777"/>
                                            </StackPanel>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </Border>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </ScrollViewer>
</Window>